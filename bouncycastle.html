<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>Phaser - Making your first game, part 1</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>
hi
<script type="text/javascript">

var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });


function preload() {
  game.load.image('sky', 'assets/sky1.png');
  game.load.spritesheet('dude', 'assets/baddie.png', 32, 32);
  game.load.spritesheet('dude2', 'assets/baddie2.png', 32, 32);
  game.load.image('ground', 'assets/platform1.png');
}
var player;
var player2;
var players;
var cursors;
var platforms;
var keyW;
var keyA;
var keyS;
var keyS;
var playerUp = 80;
var playerDown = 300;
var playerLeft = -300;
var playerRight = 300;

function create(){
  // physice
  game.physics.startSystem(Phaser.Physics.ARCADE);
  // background image
  game.add.sprite(0, 0, 'sky');

  
  // the platforms group
  platforms = game.add.group();
  // give objects physics
  platforms.enableBody = true;

  //platforms
  var ledge = platforms.create(400, 400, 'ground');
  ledge.body.immovable = true;
  
  
  players=game.add.group()

  player = game.add.sprite((game.world.width*0.6), 80, 'dude');
  player2 = game.add.sprite((game.world.width*0.5), 80, 'dude2');
  players.add(player2);
  players.add(player);
  
  game.physics.arcade.enable(players);
  player.body.bounce.y = player2.body.bounce.y = 1;
  player.body.bounce.x = player2.body.bounce.x = 0.5;
  player.body.gravity.y= player2.body.gravity.y = 350;

  
  //players.body.gravity.y = 350;
  
  
  //creating cursor instance
  cursors = game.input.keyboard.createCursorKeys();

  
  //our two animations walking left and right.
  player.animations.add('left', [0,1], 10, true);
  player.animations.add('right', [2,3], 10, true);
  player.animations.add('down', [4,5], 10, true);
  player.animations.add('up', [6], 10, true);
  
  player2.animations.add('left', [0,1], 10, true);
  player2.animations.add('right', [2,3], 10, true);
  player2.animations.add('down', [4,5], 10, true);
  player2.animations.add('up', [6], 10, true);
  
  
}
function update() {


  
  controlsManagement(player, cursors.up, cursors.down, cursors.left, cursors.right);
  controlsManagement(player2, game.input.keyboard.addKey(Phaser.Keyboard.W), game.input.keyboard.addKey(Phaser.Keyboard.S), game.input.keyboard.addKey(Phaser.Keyboard.A), game.input.keyboard.addKey(Phaser.Keyboard.D));

    
  //collisions  
  game.physics.arcade.collide(players, platforms);
  game.physics.arcade.collide(players);
  //game.physics.arcade.overlap(players, platforms, collectStar, null, this);
  
}

function collectStar(players,platforms){
  players.body.velocity.y = -300;
  //platforms.kill();
}


function controlsManagement(player, up, down, left, right){
   
  if(up.isDown)
  {
    if(player.body.velocity.y>playerUp)
      player.body.velocity.y = playerUp;
    player.animations.play('up');
    //player2.animations.play('left');
  }
  else if(left.isDown){
    player.body.velocity.x = playerLeft;
    player.animations.play('left');
  }
  else if(down.isDown){
    player.body.velocity.y = playerDown;
    player.animations.play('down');
  }
  else if(right.isDown){
    player.body.velocity.x = playerRight;
    player.animations.play('right');
  }
  else{
    //Stand still
    player.frame = 7;
    player.animations.stop();
  }
}

</script>

</body>
</html>